---
lab:
  title: Choisir et d√©ployer un mod√®le de langage
  description: Les applications IA g√©n√©ratives sont bas√©es sur un ou plusieurs mod√®les de langage. D√©couvrez comment rechercher et s√©lectionner les mod√®les appropri√©s pour votre projet d‚ÄôIA g√©n√©rative.
---

# Choisir et d√©ployer un mod√®le de langage

Le catalogue de mod√®les d‚ÄôAzure¬†AI¬†Foundry sert de r√©f√©rentiel central o√π vous pouvez explorer et utiliser une vari√©t√© de mod√®les, facilitant ainsi la cr√©ation de votre sc√©nario d‚ÄôIA g√©n√©rative.

Dans cet exercice, vous allez explorer le catalogue de mod√®les dans le portail Azure¬†AI¬†Foundry et comparer les mod√®les potentiels pour une application d‚ÄôIA g√©n√©rative qui aide √† r√©soudre les probl√®mes.

Cet exercice prend environ **25**¬†minutes.

## Cr√©er un projet et un hub Azure¬†AI

Un hub Azure AI fournit un espace de travail collaboratif dans lequel vous pouvez d√©finir un ou plusieurs *projets*. Nous allons cr√©er un projet et un hub Azure¬†AI.

1. Dans un navigateur web, ouvrez le [portail Azure¬†AI¬†Foundry](https://ai.azure.com) √† l‚Äôadresse `https://ai.azure.com` et connectez-vous en utilisant vos informations d‚Äôidentification Azure. Fermez les conseils ou les volets de d√©marrage rapide ouverts la premi√®re fois que vous vous connectez et, si n√©cessaire, utilisez le logo **Azure¬†AI¬†Foundry** en haut √† gauche pour acc√©der √† la page d‚Äôaccueil, qui ressemble √† l‚Äôimage suivante¬†:

    ![Capture d‚Äô√©cran du portail Azure¬†AI¬†Foundry.](./media/ai-foundry-home.png)

1. Sur la page d‚Äôaccueil, s√©lectionnez **+Cr√©er un projet**.
1. Dans l‚ÄòAssistant **Cr√©er un projet**, entrez un nom de projet appropri√© (par exemple, `my-ai-project`) et, si un hub existant est sugg√©r√©, choisissez l‚Äòoption permettant d‚Äòen cr√©er un. Passez ensuite en revue les ressources Azure qui seront cr√©√©es automatiquement pour prendre en charge votre hub et votre projet.
1. S√©lectionnez **Personnaliser** et sp√©cifiez les param√®tres suivants pour votre hub¬†:
    - **Nom du hub**¬†: *nom unique, par exemple `my-ai-hub`*
    - **Abonnement**¬†: *votre abonnement Azure*
    - **Groupe de ressources**¬†: *cr√©ez un groupe de ressources avec un nom unique ( par exemple, `my-ai-resources`) ou s√©lectionnez un groupe de ressources existant.*
    - **Emplacement**¬†: s√©lectionnez **Aidez-moi √† choisir**, puis s√©lectionnez **gpt-4** dans la fen√™tre de l‚Äôassistant de l‚Äôemplacement et utilisez la r√©gion recommand√©e.\*
    - **Connecter Azure¬†AI¬†Services ou Azure¬†OpenAI**¬†: *cr√©er une ressource AI¬†Services avec un nom appropri√© (par exemple, `my-ai-services`) ou utiliser une ressource existante*
    - **Connecter la Recherche Azure AI** : ignorer la connexion

    > \* Les quotas de mod√®les sont limit√©s au niveau du locataire par des quotas r√©gionaux. Si une limite de quota est atteinte plus tard dans l‚Äôexercice, vous devrez peut-√™tre cr√©er une autre ressource dans une autre r√©gion.

1. S√©lectionnez **Suivant** et passez en revue votre configuration. S√©lectionnez **Cr√©er** et patientez jusqu‚Äô√† ce que l‚Äôop√©ration se termine.
1. Une fois votre projet cr√©√©, fermez les conseils affich√©s et passez en revue la page du projet dans le portail Azure¬†AI¬†Foundry, qui doit ressembler √† l‚Äôimage suivante¬†:

    ![Capture d‚Äô√©cran des d√©tails d‚Äôun projet Azure¬†AI dans le portail Azure¬†AI¬†Foundry.](./media/ai-foundry-project.png)

## Configurer le d√©ploiement du service d‚Äôinf√©rence Azure¬†AI

Il existe plusieurs options pour d√©ployer des mod√®les dans le portail Azure¬†AI¬†Foundry. Dans cet exercice, vous allez utiliser l‚Äôoption de d√©ploiement d‚Äô**inf√©rence de mod√®le Azure¬†AI**, qui prend en charge les mod√®les *Azure¬†OpenAI* et les *mod√®les en tant que service* du catalogue de mod√®les Azure¬†AI¬†Foundry. √âtant donn√© que tous les mod√®les sont d√©ploy√©s sur un point de terminaison commun h√©berg√© par votre ressource Azure¬†AI¬†Services, il est facile de basculer entre les mod√®les lors de leur test afin de comparer le comportement et les performances.

1. Dans la barre d‚Äôoutils situ√©e en haut √† droite de la page de votre projet Azure AI Foundry, utilisez l‚Äôic√¥ne **Aper√ßu des fonctionnalit√©s** (üì£) pour afficher l‚Äôaper√ßu des fonctionnalit√©s.
1. V√©rifiez que la fonctionnalit√© **D√©ployer des mod√®les vers le service d‚Äôinf√©rence de mod√®les Azure AI** est activ√©e. Fermez ensuite le volet **Fonctionnalit√©s en version pr√©liminaire**.

## V√©rifier les d√©tails et les benchmarks des mod√®les

Pour vous aider √† choisir un mod√®le, vous pouvez explorer les descriptions et les benchmarks de mod√®les pour d√©terminer le mod√®le le mieux adapt√© √† vos besoins.

1. Dans le volet de navigation de gauche du portail de projet Azure¬†AI¬†Foundry, s√©lectionnez **Catalogue de mod√®les**.
1. Dans la page d‚Äôaccueil du catalogue de mod√®les, recherchez `gpt-4` pour trouver le mod√®le de saisie semi-automatique conversationnel **gpt-4**.

    ![Capture d‚Äô√©cran d‚Äôune recherche de mod√®le ¬´¬†gpt-4¬†¬ª dans le catalogue de mod√®les.](./media/model-catalog-search-gpt4.png)

1. S√©lectionnez le mod√®le **gpt-4** et affichez ses d√©tails. Lisez la description et passez en revue les autres informations disponibles sur la page.

    ![Capture d‚Äô√©cran de la page des d√©tails du mod√®le gpt-4.](./media/gpt4-details.png)

1. Dans la page **gpt-4**, affichez l‚Äôonglet **Benchmarks** pour voir la comparaison du mod√®le √† d‚Äôautres mod√®les utilis√©s dans des sc√©narios similaires en fonction de r√©f√©rences de performance standard.

    ![Capture d‚Äô√©cran de la page des benchmarks du mod√®le gpt-4.](./media/gpt4-benchmarks.png)

1. Utilisez la fl√®che pr√©c√©dent (**&larr;**) en regard du titre de la page **gpt-4** pour revenir √† la page d‚Äôaccueil du catalogue de mod√®les.
1. Dans le catalogue de mod√®les, recherchez `Phi-3.5-mini-instruct` et affichez les d√©tails et les benchmarks du mod√®le **Phi-3.5-mini-instruct**.

## Comparer des mod√®les

Vous avez examin√© deux mod√®les diff√©rents, qui peuvent √™tre utilis√©s pour impl√©menter une application de conversation d‚ÄôIA g√©n√©rative. Nous allons maintenant comparer visuellement les m√©triques de ces deux mod√®les.

1. Revenez √† la page d‚Äôaccueil du **catalogue de mod√®les**.
1. S√©lectionnez **Comparer les mod√®les**. Un graphique visuel pour la comparaison de mod√®les s‚Äôaffiche avec une s√©lection de mod√®les courants.

    ![Capture d‚Äô√©cran de la page de comparaison des mod√®les.](./media/compare-models.png)

1. Dans le volet **Mod√®les √† comparer** √† gauche, notez que vous pouvez s√©lectionner des t√¢ches populaires, telles que les *r√©ponses aux questions* pour s√©lectionner automatiquement les mod√®les couramment utilis√©s pour des t√¢ches sp√©cifiques.
1. Utilisez l‚Äôic√¥ne **Effacer tous les mod√®les** (&#128465;) pour supprimer tous les mod√®les pr√©-s√©lectionn√©s.
1. Utilisez le bouton **+ Mod√®le √† comparer** pour ajouter le mod√®le **gpt-4** √† la liste. Utilisez ensuite le m√™me bouton pour ajouter le mod√®le **Phi-3.5-mini-instruct** √† la liste.
1. Passez en revue le graphique, qui compare les mod√®les en fonction de l‚Äô**index de qualit√©** (un score standardis√© indiquant la qualit√© du mod√®le) et le **co√ªt**. Vous pouvez voir les valeurs sp√©cifiques d‚Äôun mod√®le en maintenant la souris sur le point qui le repr√©sente dans le graphique.

    ![Capture d‚Äô√©cran du graphique de comparaison des mod√®les pour gpt-4 et Phi-3.5-mini-instruct.](./media/comparison-chart.png)

1. Dans le menu d√©roulant **Axe X**, sous **Qualit√©**, s√©lectionnez les mesures suivantes et observez chaque graphique obtenu avant de passer au suivant¬†:
    - Pr√©cision
    - Coh√©rence
    - Fluidit√©
    - Pertinence

## D√©ployer des mod√®les

Maintenant que vous avez explor√© vos options via des benchmarks de mod√®le, vous √™tes pr√™t √† d√©ployer des mod√®les de langage. Vous pouvez parcourir le catalogue de mod√®les et en d√©ployer un √† partir de l√†, ou vous pouvez le faire via la page **D√©ploiements**. Examinons les deux options.

### D√©ployer un mod√®le √† partir du *catalogue de mod√®les*

Commen√ßons par d√©ployer un mod√®le √† partir du catalogue de mod√®les. Cette option est pr√©f√©rable lorsque vous souhaitez examiner plusieurs mod√®les disponibles.

1. Revenez √† la page d‚Äôaccueil du **catalogue de mod√®les**.
1. Recherchez et s√©lectionnez le mod√®le `gpt-4`, comme vous l‚Äôavez fait pr√©c√©demment.
1. Sur la page **gpt-4**, s√©lectionnez **D√©ployer** et d√©ployez le mod√®le avec les param√®tres suivants en s√©lectionnant **Personnaliser** dans les d√©tails du d√©ploiement¬†:
1. D√©ployez le mod√®le avec les param√®tres suivants en s√©lectionnant **Personnaliser** dans les d√©tails du d√©ploiement¬†:
    - **Nom du d√©ploiement**¬†: *nom unique pour votre mod√®le de d√©ploiement, par exemple `gpt-4`*
    - **Type de d√©ploiement** : Standard
    - **Version du mod√®le**¬†: 0613
    - **Ressource IA connect√©e**¬†: *s√©lectionnez votre connexion de ressources Azure¬†OpenAI*
    - **Limite de d√©bit en jetons par minute (en milliers)** : 5¬†000
    - **Filtre de contenu**¬†: DefaultV2
    - **Enable dynamic quota**¬†: d√©sactiv√©
      
    > **Remarque**¬†: La r√©duction du nombre de jetons par minute permet d‚Äô√©viter une surutilisation du quota disponible dans l‚Äôabonnement que vous utilisez. 5 000 jetons par minute sont suffisants pour les donn√©es utilis√©es dans cet exercice.

1. Attendez la fin du d√©ploiement.

### D√©ployer un mod√®le par le biais de *Mod√®les + points de terminaison*

Si vous savez d√©j√† quel mod√®le vous souhaitez d√©ployer, vous pouvez le faire par le biais de la page **Mod√®les + points de terminaison**.

1. Dans la barre de navigation de gauche, dans la section **Mes ressources**, s√©lectionnez **Mod√®les + points de terminaison**.
1. Sous l‚Äôonglet **D√©ploiements de mod√®les**, dans la liste d√©roulante **+ D√©ployer un mod√®le**, s√©lectionnez **D√©ployer le mod√®le de base**. Recherchez ensuite `Phi-3.5-mini-instruct`, puis confirmez votre s√©lection.
1. Acceptez la licence du mod√®le.
1. D√©ployez un mod√®le **Phi-3.5-mini-instruct** avec les param√®tres suivants¬†:
    - **Nom du d√©ploiement**¬†: *nom unique pour votre mod√®le de d√©ploiement, par exemple `Phi-3.5-mini-instruct`*
    - **Type de d√©ploiement**¬†: standard global
    - **D√©tails du d√©ploiement**¬†: *utilisez les param√®tres par d√©faut*

1. Attendez la fin du d√©ploiement.

## Tester vos mod√®les dans le terrain de jeu de conversation

Maintenant que vous avez deux mod√®les √† comparer, examinons leur comportement dans le cadre d‚Äôune interaction conversationnelle.

### Pr√©parer la conversation

1. Dans la barre de navigation, s√©lectionnez **Terrains de jeu**. S√©lectionnez ensuite le **terrain de jeu de conversation**.
1. Dans le volet **Configuration**, dans le champ **Donner des instructions et du contexte au mod√®le**, d√©finissez l‚Äôinvite du syst√®me sur `You are an AI assistant that helps solve problems.`.
1. S√©lectionnez **Appliquer les modifications**.

### Discuter avec le mod√®le *gpt-4*

Dans le volet **Configuration**, s√©lectionnez votre mod√®le *gpt-4*.
1. Dans la fen√™tre de conversation, entrez la requ√™te suivante¬†:

    ```
    I have a fox, a chicken, and a bag of grain that I need to take over a river in a boat. I can only take one thing at a time. If I leave the chicken and the grain unattended, the chicken will eat the grain. If I leave the fox and the chicken unattended, the fox will eat the chicken. How can I get all three things across the river without anything being eaten?
    ```

1. Affichez la r√©ponse. Entrez ensuite la requ√™te de suivi suivante¬†:

    ```
    Explain your reasoning.
    ```

### Discuter avec le mod√®le *Phi-3.5*

1. Dans le volet **Configuration**, s√©lectionnez votre mod√®le *Phi-3.5*.
1. V√©rifiez qu‚Äôune nouvelle session de conversation est d√©marr√©e avant de r√©p√©ter les m√™mes invites que celles que vous avez pr√©c√©demment utilis√©es pour tester le mod√®le gpt-4.
1. Dans la fen√™tre de conversation, entrez la requ√™te suivante¬†:

    ```
    I have a fox, a chicken, and a bag of grain that I need to take over a river in a boat. I can only take one thing at a time. If I leave the chicken and the grain unattended, the chicken will eat the grain. If I leave the fox and the chicken unattended, the fox will eat the chicken. How can I get all three things across the river without anything being eaten?
    ```

1. Affichez la r√©ponse. Entrez ensuite la requ√™te de suivi suivante¬†:

    ```
    Explain your reasoning.
    ```

### Effectuer une comparaison suppl√©mentaire

1. Essayez le puzzle suivant avec les deux mod√®les, en demandant aux mod√®les d‚Äôexpliquer leur raisonnement (la bonne r√©ponse est 40)¬†:

    ```
    I have 53 socks in my drawer: 21 identical blue, 15 identical black and 17 identical red. The lights are out, and it is completely dark. How many socks must I take out to make 100 percent certain I have at least one pair of black socks?
    ```

## R√©fl√©chir sur les mod√®les

Vous avez compar√© deux mod√®les, qui peuvent varier en termes de capacit√© √† g√©n√©rer des r√©ponses appropri√©es et dans leur co√ªt. Dans n‚Äôimporte quel sc√©nario de g√©n√©ration, vous devez trouver un mod√®le qui offre le bon rapport entre son ad√©quation √† la t√¢che √† effectuer et son co√ªt d‚Äôutilisation pour le nombre de demandes que vous pr√©voyer de traiter.

Les d√©tails et les benchmarks fournis dans le catalogue de mod√®les, ainsi que la possibilit√© de comparer visuellement les mod√®les offrent un point de d√©part utile lors de l‚Äôidentification des mod√®les potentiels pour une solution d‚ÄôIA g√©n√©rative. Vous pouvez ensuite tester les mod√®les potentiels avec une vari√©t√© d‚Äôinvites syst√®me et utilisateur dans le terrain de jeu de conversation.

## Nettoyage

Si vous avez termin√© d‚Äôexplorer Azure¬†AI¬†Foundry, vous devez supprimer les ressources que vous avez cr√©√©es dans cet exercice pour √©viter d‚Äôentra√Æner des co√ªts Azure inutiles.

1. Ouvrez le [portail Azure](https://portal.azure.com) et affichez le contenu du groupe de ressources o√π vous avez d√©ploy√© les ressources utilis√©es dans cet exercice.
1. Dans la barre d‚Äôoutils, s√©lectionnez **Supprimer le groupe de ressources**.
1. Entrez le nom du groupe de ressources et confirmez que vous souhaitez le supprimer.
